After an hour I had a code that did what I inteded it to do, just to discover that I have misunderstood the problem. I couldn't figure out how the problem could be formalised, so I checked reddit. After understanding that a pushdown automaton kind of stack was needed and that always the last open bracket needs to be closed, I managed to write the code by myself. Needed about 2hrs in total.